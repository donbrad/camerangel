
<div data-role="view" data-title="Contacts" id="contacts" data-layout="main" data-model="contactModel" data-init="onInitContacts" data-show="onShowContacts" data-hide="onHideContacts" style="display: none;">
	<div class="topViewSearchBox">
	 	<div class="appendSearch">
			<span class="searchIcon"><img src="images/search.svg" /></span>
			<input type="search" class="viewSearchBox" placeholder="Search" id="contactSearchInput" />
		</div>
		
		<a class="hidden btnClear-sm" data-role="button" data-click="searchDeviceContacts" id="btnSearchDeviceContacts"> 
			<img src="images/contacts.svg" /> 
			Search device for "<span id="btnSearchDeviceName"></span>"
		</a>
	</div>
		<div id="contactListDiv"  style="padding-bottom: 24px;">
	        <ul id="contacts-listview"></ul>
			<!-- Only display if device permission is needed -->
			<div id="deviceContactPermission" class="pad center hidden">

				<a class="btnClear">
					<img src="images/import.svg" height="16" />
						Find contacts on device
				</a>
			</div>
			<div class="emptyState hidden">
         		<img src="images/empty-contacts.svg" />
         	</div>
	    </div>
    
    <ul data-role="actionsheet" id="contactActions" data-popup='{"direction": "left"}'>
		<li><a data-action="inviteContact">Invite Contact</a></li>
		<li><a  data-action="doEditContact">Edit Contact</a></li>
		<li><a data-action="contactSendSMS">Send SMS</a></li>
		<li><a data-action="contactSendEmail">Send Email</a></li>
		<li><a data-action="contactCallPhone">Phone Call</a></li>
    </ul> 
    
      <ul data-role="actionsheet" id="contactUserActions" data-popup='{"direction": "left"}'>
        <li><a data-action="doEditContact">Edit Contact</a></li>
        <li><a data-action="privateChat">Private Chat</a></li>
		<li><a data-action="ghostEmail">Send Secure Email</a></li>
		<li><a data-action="contactSendSMS">Send SMS</a></li>
		<li><a data-action="contactSendEmail">Send Email</a></li>
		<li><a data-action="contactCallPhone">Phone Call</a></li>
    </ul>
</div>

<!-- contact action -->
<div data-role="modalview" id="modalview-contactActions" data-model="contactModel.currentContact" class="appearance" style="width: 90%; display: none;">
	<div class="modal-top">
		<a data-role="button" class="modal-close" data-click="closeContactActions"><img src="images/close.svg"/></a>
		<img class="circle-img-lg" data-bind="attr: {src: photo}"/>
		<h3 data-bind="text: name"></h3>
		<p data-bind="text: alias"></p>
	</div>
	<div class="modal-bottom">
		<ul class="list-inline" id="contactActionBtns" >
			<li><a class="btnClear" data-role="button" data-click="privateChat">ghostgram Private Chat</a></li>
			<li><a class="btnClear" data-role="button" data-click="ghostEmail">ghostgram Rich Email</a></li>
			<li><a class="btnClear" data-role="button" data-click="contactCallPhone">Phone Call</a></li>
			<li><a class="btnClear" data-role="button" data-click="contactSendSMS">Send SMS</a></li>
		</ul>
	</div>
</div>

<!-- Import Contacts -->
<div data-role="view" data-title="Import Contacts" id="contactImport" data-layout="main" data-model="contactModel" data-init="onInitContactImport" data-show="onShowContactImport" style="display: none;">
    <div data-role="header">
        <div data-role="navbar">
           <a data-role="button"  data-align="left" href="#:back" ><img src="images/nav-back.svg" /></a>

			<span data-role="view-title"></span>
        </div>
    </div>    
    <div  style="padding-bottom: 24px;">
       <div style="padding-bottom: 4px; padding-top: 4px;">
         <input  style="font-size: 16px; margin-left: 6px; width: 80%" id="contactSearchQuery" type="search"/>
         <a data-role="button"  data-click="contactsFindContacts">  
         	<i class="ghostIconSmall fa fa-search"></i>
         </a>
        </div>
        <ul id="contactimport-listview"></ul>
    </div>    
</div>

<!-- Modal add contact -->
<div data-role="modalview" data-model="contactModel" data-title="Add Contact" id="modalview-AddContact" data-open="doShowAddContact" class="appearance" style="width: 90%; min-height: 100%; display: none;">
    <div class="inviteContactImg">
    	<div class="inviteTop hidden">
    		<img src="images/invite.svg" height="16" />
    	</div>
    	<span class="right closeBox">
    		<a data-role="button" data-click="closeAddContact">
    			<img src="images/close.svg"/>
    		</a>
    	</span>
    	
    	<div class="topHalf">
    		<div class="topHalfLeft">
    			<img class="circle-img-lg shadow" id="addContactPhoto" src="images/ghostgramcontact.png" />
    		</div>
    		<div class="topHalfRight">
				<div>
					<input class="input-text-md " id="addContactName" type="search" placeholder="Contact full name"/>
				</div>
				<div>
    				<span class="caption">aka</span>
                	<input class="input-text-sm " id="addContactAlias" type="search" placeholder="Add a nickname"/>
    			</div>
    		</div>
    	</div>
    	<div class="clearfix"></div>
    	<ul data-role="listview" data-style="inset" class="inviteContactInfo">
    		<li>           
                <label>Phone
                    <select id="addContactPhone" data-role="dropdownlist" 
                            data-text-field="number" 
                            data-value-field="number"
                            data-bind="source: phoneDS"
                            auto-bind="false">
                    </select>
                </label>
            </li>
            <li>
                <label>Email
                     <select id="addContactEmail" data-role="dropdownlist"
                            data-text-field="address" 
                            data-value-field="address"
                            data-bind="source: emailDS"
                           	auto-bind="false">
                    </select>
                </label>
            </li>
            <li>
                <label>Address
                     <select id="addContactAddress" data-role="dropdownlist"
                            data-text-field="address" 
                            data-value-field="address"
                            data-bind="source: addressDS"
                           	auto-bind="false">
                    </select>
                </label>
            </li>
    	</ul>
    	<a class="btnPrimary btnSpan" data-role="button" data-click="contactsAddContact">Invite to ghostgrams</a>
    </div> 
</div>

<!-- Edit Contacts -->
<div data-role="view" data-model="contactModel.currentContact" data-title="Edit Contact" id="editContact"  data-transition="slide" data-show="onShowEditContact" class="appearance" style="display: none;">
    <div data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-role="button" data-click="onDoneEditContact" data-align="left" >Done</a>         
        </div>
    </div>

    <div style="padding-bottom: 12px;">
		<form>
			<div class="topHalf">
	    		<div class="topHalfLeft">
	    			<img class="circle-img-lg shadow" data-bind="attr:{src: photo}" />
	    		</div>
	    		<div class="contactImg">
	    			<label for="editContactName">
	    				<input class="input-text-md" type="text" id="editContactName" data-bind="value: name"/>
	    			</label>
					<div>
						<span class="caption">aka</span>
						<span>
							<input style="width: 75%;" type="text" placeholder="Add a nickname" id="editContactAlias" data-bind="value: alias"/>
						</span>
					</div>
	    			
	    		</div>
	    	</div>
	    	<div class="clearfix"></div>
			
			<ul data-role="listview" data-style="inset" id="contactEditList">				 
				<li>           
					<label>Phone
						<span class="helper helper-verified hidden" id="edit-verified-phone">
	                         <img class="helper-verified-img" src="images/verified.svg" height="14"> 
	                             Verified
	                    	<span class="helper helper-right helper-form"> <img src="images/lock.svg"/> Locked
	                    	</span>
                        </span>
						
						<input id="editContactPhone" type="phone" data-bind="value:phone"/>
					</label>
				</li>
				<li>
					<label>Email
						<span class="helper helper-verified hidden" id="edit-verified-email">
	                         <img class="helper-verified-img" src="images/verified.svg" height="14"> 
	                             Verified
		                    <span class="helper helper-right"> 
		                    	<img class="helper-img" src="images/lock.svg"/> Locked
		                    </span>
                        </span>
						
						 <input id="editContactEmail" type="email" data-bind="value: email"/>

					</label>
				</li>
				 <li>
					<label>Address
						 <input id="editContactAddress" data-bind="value: address"/>
					</label>
				</li>
			</ul>
			
			<ul data-role="listview" data-style="inset" id="syncEditList">
				<li>
					<p> Device Info</p>
				</li>
				<li>           
                <label>Phone <span class="input-count hidden" id="syncEditPhoneCount"></span>
                    <select id="syncContactPhone" data-role="dropdownlist" 
                            data-text-field="number" 
                            data-value-field="number"
                            data-bind="source: phoneDS"
                            auto-bind="false">
                    </select>
                </label>
				</li>
				<li>
					<label>Email Addresses
						 <select id="syncContactEmail" data-role="dropdownlist"
								data-text-field="address" 
								data-value-field="address"
								data-bind="source: emailDS"
								auto-bind="false">
						</select>
					</label>
				</li>
				<li>
					<label>Address List
						 <select id="syncContactAddress" data-role="dropdownlist"
								data-text-field="address" 
								data-value-field="address"
								data-bind="source: addressDS"
								auto-bind="false">
						</select>
					</label>
				</li>
				<li>
					<div style="text-align: center; padding-top: 6px; padding-bottom: 6px;">
					<a data-role="button" class="btnSecondary btnSpan" id="editContact-syncCompleteBtn" data-click="onDoneSyncContact" style="display: none;"> Update Contact</a>
					</div>
				</li>
    		</ul>
    		<div class="edit-contacts-options">
				<a data-role="button" class="btnClear-grey" id="editContact-resyncBtn" data-click="doSyncContact">
					<img src="images/contacts.svg" />  Sync Contact With Device
				</a>
				
			</div>
		</form>
	</div>
	<div class="footerBk" data-role="footer">
		<a data-role="button" class="btnClear-red btnSpan-btm" id="editContact-deleteBtn" data-click="deleteContact">
					<img src="images/trash.svg" />  Delete Contact
				</a>
	</div>
</div>

<script type="text/x-kendo-template" id="contactsHeaderTemplate">
	<div>
		# if (data.value === 'phone') {#
			Device
		#} else if (data.value === 'new'){#
			Invited
		#} else {#
			Member
		#}#
	</div>
</script>


<script type="text/x-kendo-template" id="contactsTemplate">      
	<div>
    	<div class="contact-options list-options">
    		# if (data.contactUUID !== undefined && data.contactUUID !== null){#
    			<a class="btnClear-grey" data-role="button" data-click="doEditContact" data-contact="#:uuid#">
				    <img src="images/option-edit.svg" height="18" />
				    <p class="chat-option-selection">Edit</p>
			   	</a>
    		#} else {#
			   	<a class="btnClear-grey" data-role="button" data-click="doInviteContact" data-contact="#:uuid#">
			    	<img src="images/contact-invite.svg" height="12" />
			    	<p class="chat-option-selection"> Resend Invite</p>
		    	</a>
			   	
    		#}#
    			<a class="btnClear-red" data-role="button" data-click="doDeleteContact" data-contact="#:uuid#">
			    	<img src="images/trash.svg" height="18" />
			    	<p class="chat-option-selection"> Delete</p>
		    	</a>
		    
    	</div><!-- contact-options -->

		<div class="contactListBox">
			 <a class="contactListItem">

				 #if (data.category !== 'phone') {#
					<div class="left listPhoto">
						<div class="statusContactList">

							#if (data.isAvailable !== undefined && data.isAvailable) { #
								<img class="circle-img-md" src="#:data.photo#" />
								<img width="16" src="images/status-available.svg" class="statusContactList-icon" />
							# }
							else { #
								<img class="circle-img-md" src="#:data.photo#" />
								<img width="16" src="images/status-away.svg" class="statusContactList-icon" />
							#}#
						</div>
					</div><!-- left -->

						<div class="left listName">
							<h4>
							#if(data.alias !== ''){#
								#: data.alias #
							#} else {#
								#: data.name #
							#}#
							#if (data.phoneVerified){#
									<img src="images/user-verified.svg" class="user-status-icon" />
							#}#
							# if(data.alias !== '' && data.name !== data.alias) {#
								<span class="contacts-alias-sm">#: data.name #</span>
							#}#
							</h4>
						</div>

						<p class="left caption contact-status">
						#if(data.phoneVerified !== true){#
							Unverified •
						#}#	Busy @ home
						</p>
						<div class="clearfix"></div>
						<div class="contact-info">
							<label>Contact via</label>
							<ul data-role="listview" data-style="inset">
								<li><a class="btnClear">Private Chat</a></li>
								<li><a class="btnClear">ghostMail</a></li>
								<li><a class="btnClear">Call</a></li>
								<li><a class="btnClear">SMS</a></li>
							</ul>
						</div>
				#} else {#
					<h4 class="phoneContact">
						#: data.name #
					</h4>
				#}#
			</a>
		</div><!-- listBox -->
	</div>

</script>

<script type="text/x-kendo-template" id="deviceContactsTemplate">
  <div>
	  <div>
	  # if (data.name == '') {#
	  	<!-- only for simulator -->
	  	<h4>John Smith
	  		<span class="right">
	  			<a class="btnClearLine">Add</a>
	  		</span>
	  	</h4>
	  #} else {# 
	  		<h4>#:data.name #
	  		<span class="right">
	  			<a class="btnClearLine">Add</a>
	  		</span>
	  	</h4>
	  #}#  
	  </div>
  </div>
</script>

<div data-role="view" data-title="Contact" id="contact" data-layout="main" data-model="contactModel" data-init="onInitContact">
  <div data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-role="button" href="#appDrawer" data-rel="drawer" data-align="left"><img class="menuIcon" src="images/menu-icon.svg"/></a>
            <a data-role="button" href="#contactImport" data-align="right" ><i class="ghostIconNavbar fa fa-plus"></i> </a>
        </div>
    </div>       
    
    <div>
        <ul id="xcontacts-listview"></ul>
    </div>
    
    
</div>


<div data-role="view" data-title="ghostEmail" id="ghostEmail" data-layout="main" data-init="onInitGhostEmail" data-show="onShowGhostEmail" >
	<div data-role="header">
		<div data-role="navbar">
			<span data-role="view-title"></span>
			<a data-role="button"  data-align="left" href="#:back" ><img src="images/nav-back.svg" /></a>
			<a data-role="button" data-click="sendGhostEmail" data-align="right" ></i>Send</a>
		</div>
	</div>

	<div id="ghostEmailwrapper" style="width: 100%; height:100%;">
		
		<textarea id="ghostEmailEditor" contenteditable="true" class="editor" rows="80" cols="80" style="width:100%; min-height:380px; border: 1px solid #2e2e2e; padding: 4px; margin: 6px; color: #111111;">

		</textarea>
		
	</div>

</div>